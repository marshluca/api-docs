.box
  %h3 #{@doc.name} #{edit_doc_link(@project, @doc)}
  %p= @doc.desc
  %br/

  %h4 请求类型
  %p= @doc.http_method

  %h4 是否需要登录
  %p= @doc.authenticated ? '是' : '否'

  %h4 支持格式
  %p= @doc.format

  %h4 请求参数 #{manage_parameters_link(@project, @doc)}
  %table
    %tr
      %th Name
      %th Type
      %th Required
      %th Desc

    - @doc.parameters.each do |p|
      %tr
        %td= p.name
        %td= p.type
        %td= p.required
        %td= p.desc

.box
  %h4 URL
  %p= @doc.url
  %br/

  %h4 返回示例
  %p.markdown= markdown(@doc.annotation)

.box
  %h4 评论
  .topics
    - @doc.comments.each do |comment|
      - if comment.author
        .topic.topic_line
          .pull-left.avatar= image_tag(comment.author.gravatar_url)
          .right_info
            .infos
              .title #{comment.author.name}: #{comment.content}
              .info.time= comment.created_at.to_s(:db)

  = render 'comment'
